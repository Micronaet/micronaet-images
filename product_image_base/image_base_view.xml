<?xml version="1.0"?>
<openerp>
    <data>
    <!-- product.image.file: -->
    <record id="product_product_image_file_tree_view" model="ir.ui.view">
        <field name="name">Image file</field>
        <field name="model">product.image.file</field>
        <field name="arch" type="xml">
            <tree string="Image album" colors="grey:exist==False;red:product_id==False;blue:variant==True">
                <field name="exist" />
                <field name="updated" />
                <field name="album_id" invisible="context.get('embedded_form',False)"/>
                <field name="product_id" />
                <field name="filename" />
                <field name="timestamp" />
                <field name="variant" />
                <field name="variant_code" />
                <field name="height" />
                <field name="width" />                
            </tree>
        </field>
    </record>
    <record id="product_product_image_file_form_view" model="ir.ui.view">
        <field name="name">Image file</field>
        <field name="model">product.image.file</field>
        <field name="arch" type="xml">
            <form string="Image file" version="7.0">
                <sheet>
                    <group colspan="4" col="4">
                        <field name="exist" />
                        <newline/>

                        <field name="album_id" invisible="context.get('embedded_form',False)"/>
                        <field name="product_id" />

                        <field name="filename" />
                        <field name="timestamp" />

                        <field name="variant" />
                        <field name="variant_code" />

                        <field name="height" />
                        <field name="width" />                
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- product.image.album: -->
    <record id="product_product_image_album_tree_view" model="ir.ui.view">
        <field name="name">Image album</field>
        <field name="model">product.image.album</field>
        <field name="arch" type="xml">
            <tree string="Image album">
                <field name="code" />
                <field name="name" />
                <field name="path" />
                <field name="parent_format" />
                <field name="extension_image" />
                <field name="height" />
                <field name="width" />
                <field name="empty_image" />
                <field name="upper_code" />
                <field name="has_variant" />
            </tree>
        </field>
    </record>
    <record id="product_product_image_album_form_view" model="ir.ui.view">
        <field name="name">Image album</field>
        <field name="model">product.image.album</field>
        <field name="arch" type="xml">
            <form string="Image album" version="7.0">
                <sheet>
                    <group colspan="4" col="4">
                        <field name="code" />
                        <field name="name" />
                        
                        <field name="path" />
                        <field name="extension_image" />

                        <field name="parent_format" />
                        <field name="empty_image" />

                        <field name="upper_code" />
                        <field name="has_variant" />

                        <field name="max_height" />
                        <field name="max_width" />

                        <field name="calculated" />
                        <notebook colspan="4">
                            <page string="File" >
                                <group colspan="4" col="2">
                                    <field name="image_ids" nolabel="1" readonly="1" context="{'embedded_form':True}"/>
                                </group>    
                           </page>
                            <page string="Calculated" attrs="{'invisible':[('calculated','=',False)]}">
                                <group colspan="4" col="4">
                                    <field name="album_id" string="Origin" attrs="{'required':[('calculated','=',True)]}" domain="[('id','!=',active_id)]"/>
                                    <field name="redimension_type" attrs="{'required':[('calculated','=',True)]}" />
                                    <field name="height" attrs="{'required':[('calculated','=',True),('redimension_type','=','length')]}" />
                                    <field name="width" attrs="{'required':[('calculated','=',True),('redimension_type','=','width')]}" />
                                </group>
                           </page>
                        </notebook>                   
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="product_product_image_album_action" model="ir.actions.act_window">
        <field name="name">Image album</field>
        <field name="res_model">product.image.album</field>
        <field name="view_type">form</field>        
        <field name="view_mode">tree,form</field>        
        <field name="help">Folder where are stored images</field>
    </record>

    <menuitem action="product_product_image_album_action" 
              id="product_product_image_album_action_menu" 
              parent="product.prod_config_main" 
              sequence="10" /> 
    </data>
</openerp>

